<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

<link rel="stylesheet" type="text/css" href="style.css" />

<style>
   /* Estilo básico para o modal */
    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border: 1px solid #ccc;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }

   #botaoLogar{
    background-color: rgb(95, 95, 224);
   }
   #botaoFechar{
    background-color: red;
   }
</style>

</head>
<body>


    <nav style="display: flex; gap: 20px; padding: 10px; background: #f0f0f0;">
  <a href="gastos.html"><img src="./img/gastos.png" alt="Gastos" width="30"></a>
  <a href="relatorios.html"><img src="./img/relatorio.png" alt="Relatório" width="30"></a>
</nav>

    
    <form id="formServico">
  <label>Tipo de Serviço:</label>
  <input type="text" id="tipoServico" required>
  
  <label>Valor (R$):</label>
  <input type="number" id="valorServico" step="0.01" required>
  
  <button type="submit">Salvar Serviço</button>
<button id="botaoLogar">Logar</button>
</form>

 

  <div id="modalLogin" class="modal">
    <h2>Login</h2>
    <input id="email" type="email" placeholder="Email">
    <input id="senha" type="password" placeholder="Senha">
    <button id="botaoEntrar">Entrar</button>
    <button id="botaoFechar">Fechar</button>
    <p id="mensagemLogin"></p>
  </div>

<!--
*********************************************************8
-->

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js";
  // Suas configs do Firebase
  const firebaseConfig = {
   
    apiKey: "AIzaSyA09nY-tstwEcqjBzYUkYdWl-TEoaLO8yA",
    authDomain: "meu-app-calculos.firebaseapp.com",
    projectId: "meu-app-calculos",
    storageBucket: "meu-app-calculos.firebasestorage.app",
    messagingSenderId: "199127737255",
    appId: "1:199127737255:web:8c1f7ced0aa2953ebd0c82"
  };

  initializeApp(firebaseConfig);
  const dbApp = initializeApp(firebaseConfig);
  const db = getFirestore(dbApp);
  const auth = getAuth();

  const form = document.getElementById('formServico');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const tipo = document.getElementById('tipoServico').value;
    const valor = parseFloat(document.getElementById('valorServico').value);
    const data = new Date();

    try {
      await addDoc(collection(db, "servicos"), {
        tipo,
        valor,
        data: data.toISOString()
      });
      alert("Serviço salvo!");
      form.reset();
    } catch (e) {
      console.error("Erro:", e);
    }
  });



    document.getElementById("botaoLogar").addEventListener("click", () => {
      document.getElementById("modalLogin").style.display = "block";
    });

    document.getElementById("botaoFechar").addEventListener("click", () => {
      document.getElementById("modalLogin").style.display = "none";
    });

    document.getElementById("botaoEntrar").addEventListener("click", () => {
      var email = document.getElementById("email").value;
      var senha = document.getElementById("senha").value;

   signInWithEmailAndPassword(auth, email, senha)
  .then((user) => {
    console.log("Logado!", user);
    document.getElementById("mensagemLogin").innerText = "Logado!";
    document.getElementById("modalLogin").style.display = "none";
  })
  .catch((error) => {
    console.error("Erro:", error);
    document.getElementById("mensagemLogin").innerText = "Erro ao Logar ";
  });
    });

   
   
  </script>

</body>
</html>
